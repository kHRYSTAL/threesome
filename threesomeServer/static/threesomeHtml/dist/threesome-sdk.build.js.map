{"version":3,"file":"threesome-sdk.build.js","sources":["../src/threesome/util/env.js","../src/threesome/util/debug.js","../src/lib/clone.js","../src/threesome/util/params.js","../src/threesome/core/bridge.js","../src/threesome/core/handler.js","../src/threesome/core/notify.js","../src/threesome/api/navigate.js","../src/threesome/lifecycle/ready.js","../src/threesome/output.js"],"sourcesContent":["// judge js run env\nexport const inBrowser =\n    typeof window !== 'undefined' && Object.prototype.toString.call(window) !== '[object Object]'\n\nexport const UA = inBrowser && window.navigator.userAgent.toLowerCase();\nexport const isAndroid = UA && UA.indexOf('android') > 0;\nexport const  isIOS = UA && /iphone|ipad|ipod|ios/.test(UA);\nexport const isThreesome = UA && UA.indexOf('threesome') > 0;\n// can set version in app client with threesome, use this value can make different logic in different app version\nexport const AppVersion = isThreesome && UA.match(/threesome\\/([\\d\\.]*)/)[1];\n\n\n/**\n * @param targetVersion current server static js version\n * @returns {boolean} if return false, means appVersion is old\n */\nexport function compareAppVersion(targetVersion) {\n    if (!AppVersion) {\n        return;\n    }\n    let aArr = AppVersion.split('.');\n    let bArr = targetVersion.split('.');\n    for (var i=0; i < 3; i++) {\n        let aNum = Number(aArr[i]);\n        let bNum = Number(bArr[i]);\n\n        if (aNum === bNum) {\n            continue;\n        } else {\n            return aNum > bNum;\n        }\n        return true;\n    }\n}","const hasConsole = typeof console !== 'undefined';\nexport function warn(msg) {\n    if (hasConsole) {\n        console.error('[Threesome warning]: ' + msg);\n    }\n}","\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      child = new Buffer(parent.length);\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nexport {clone}\n","import  {clone} from '../../lib/clone'\n\n// handle send message to format need encode to support Android and iOS\nexport function _formatParam(oldParam) {\n    var param = clone(oldParam);\n    if (typeof param === 'object') {\n        for (var key in param) {\n            param[key] = _formatParam(param[key]);\n        }\n        // param = JSON.stringify(param);\n    } else if (typeof param === 'string') {\n        param = encodeURI(param);\n    } else if (typeof param !== 'function') {\n        param = param.toString();\n    }\n    return param;\n}\n\n// handle receive message need decode\nexport function _decodeString(param) {\n    return decodeURIComponent(param);\n}\n\n// create event function name\nexport function _createEventName(txt) {\n    var str = encodeURI(txt).replace(/%/g,\"\"); // need encode because text maybe chinese\n    return '_'+str+'_Callback';\n}","var callQueue = [];\nvar registerQueue = [];\n\nfunction createBridge() {\n    var fakeBridge = {\n        callHandler: function (...args) {\n            callQueue.push(function () {\n               window.WebViewJavascriptBridge.callHandler.apply(window.WebViewJavascriptBridge, args);\n            });\n        },\n        registerHandler: function (...args) {\n            registerQueue.push(function(){\n                window.WebViewJavascriptBridge.registerHandler.apply(window.WebViewJavascriptBridge, args);\n            });\n        }\n    };\n    var callback = function (realBridge) {\n        let bridge = realBridge;\n        while(registerQueue.length > 0) {\n            var fn = registerQueue.shift();\n            fn();\n        }\n        while(callQueue.length > 0) {\n            var fn = callQueue.shift();\n            fn();\n        }\n    }\n    window.WVJBCallbacks = [callback]\n    setTimeout(function () {\n        var WVJBIframe = document.createElement('iframe');\n        WVJBIframe.style.display = 'none';\n        WVJBIframe.src = 'threesome://__BRIDGE_LOADED__';\n        document.documentElement.appendChild(WVJBIframe);\n        setTimeout(function () {\n            document.documentElement.removeChild(WVJBIframe);\n        }, 0);\n    }, 0);\n\n    return fakeBridge;\n}\n\nvar bridge = window.WebViewJavascriptBridge ? window.WebViewJavascriptBridge : createBridge();\n\nexport {bridge}\n","import {warn, _formatParam, _decodeString} from '../util/output';\nimport {bridge} from './bridge';\n\n// receive app client event\nexport function _registerHandler(name, event) {\n    bridge.registerHandler(name, function (res) {\n        res = _decodeString(res);\n        try {\n            res = JSON.parse(res)\n        } catch (e) {\n            warn(e);\n        } finally {\n            event(res);\n        }\n    });\n}\n\n// call app client event\nexport function _callHandler(taskName, param) {\n    return new Promise(function (resolve, reject) {\n        if (!(taskName && typeof taskName === \"string\")) {\n            return reject(taskName + \" lost taskName\");\n        }\n\n        let config = {\n            taskId : taskName\n        };\n\n        if (!!param) {\n            config[\"param\"] = _formatParam(param);\n        }\n\n        bridge.callHandler(\"NativeThreesome\", config, function (res) {\n            res = _decodeString(res);\n            try {\n                res = JSON.parse(res);\n            } catch (e) {\n                warn(e);\n            } finally {\n                return resolve(res);\n            }\n        })\n    })\n}\n","import {_registerHandler} from './handler';\n\nvar obMap = {};\nexport function _registerNotify(key, event) {\n    obMap[key] = event;\n}\n\nfunction _notifyCenter() {\n    _registerHandler('ThreesomeNativeNotification', function (res) {\n        var callbacks = obMap[res.type];\n        var success = 'success' in callbacks ? callbacks.success : function(){};\n        var fail = 'fail' in callbacks? callbacks.fail : function(){};\n        var complete = 'complete' in callbacks? callbacks.complete : function(){};\n\n        switch (res.code) {\n            case 200:\n            case 501:\n                success(res.type);\n                break;\n            case 500:\n                fail(res.type);\n                break;\n        }\n        complete(res.type);\n    });\n}\n\n_notifyCenter();","import {_registerHandler, _callHandler} from '../core/output'\n\n/**\n * open a new page\n * @param config\n */\nexport function navigateTo(config) {\n    _callHandler('threesome/navigator/openGroup', config)\n}\n\n/**\n * redirect to current page\n * @param config\n */\nexport function redirectTo (config){\n    _callHandler('threesome/navigator/openPage', config);\n}\n\n/**\n * close current page\n */\nexport function navigateBack (){\n    _callHandler('threesome/navigator/closeCurGroup');\n}\n\n/**\n * redirect back current page\n */\nexport function redirectBack (){\n    _callHandler('threesome/navigator/closeCurPage');\n}\n\n","export function ready(handler){\n    handler()\n}\n","import * as api from './api/output'\nimport * as lifecycle from './lifecycle/output'\nexport default Object.assign({}, api, lifecycle);\n"],"names":["inBrowser","window","Object","prototype","toString","call","UA","navigator","userAgent","toLowerCase","isAndroid","indexOf","isIOS","test","isThreesome","AppVersion","match","hasConsole","console","warn","msg","error","_instanceof","obj","type","nativeMap","Map","_","nativeSet","Set","nativePromise","Promise","clone","parent","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","Infinity","_clone","child","proto","resolve","reject","then","value","err","__isArray","__isRegExp","RegExp","source","__getRegExpFlags","lastIndex","__isDate","Date","getTime","isBuffer","length","copy","Error","create","getPrototypeOf","index","push","forEach","key","keyChild","valueChild","set","entryChild","add","i","attrs","getOwnPropertyDescriptor","getOwnPropertySymbols","symbols","symbol","descriptor","enumerable","defineProperty","allPropertyNames","getOwnPropertyNames","propertyName","clonePrototype","c","__objToStr","o","re","flags","global","ignoreCase","multiline","_formatParam","oldParam","param","encodeURI","_decodeString","decodeURIComponent","callQueue","registerQueue","createBridge","fakeBridge","args","WebViewJavascriptBridge","callHandler","apply","registerHandler","callback","realBridge","bridge","fn","shift","WVJBCallbacks","WVJBIframe","document","createElement","style","display","src","documentElement","appendChild","removeChild","_registerHandler","name","event","res","JSON","parse","e","_callHandler","taskName","config","obMap","_notifyCenter","callbacks","success","fail","complete","code","navigateTo","redirectTo","navigateBack","redirectBack","ready","handler","babelHelpers.extends","api","lifecycle"],"mappings":"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"}