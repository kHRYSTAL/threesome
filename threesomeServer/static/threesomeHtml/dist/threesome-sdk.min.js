!function(){"use strict";function e(e){l.push(e),1==l.length&&s()}function t(){for(;l.length;)l[0](),l.shift()}function n(e){this.a=d,this.b=void 0,this.f=[];var t=this;try{e(function(e){i(t,e)},function(e){c(t,e)})}catch(e){c(t,e)}}function r(e){return new n(function(t,n){n(e)})}function o(e){return new n(function(t){t(e)})}function i(e,t){if(e.a==d){if(t==e)throw new TypeError;var n=!1;try{var r=t&&t.then;if(null!=t&&"object"==typeof t&&"function"==typeof r)return void r.call(t,function(t){n||i(e,t),n=!0},function(t){n||c(e,t),n=!0})}catch(t){return void(n||c(e,t))}e.a=0,e.b=t,f(e)}}function c(e,t){if(e.a==d){if(t==e)throw new TypeError;e.a=1,e.b=t,f(e)}}function f(t){e(function(){if(t.a!=d)for(;t.f.length;){var e=t.f.shift(),n=e[0],r=e[1],o=e[2],e=e[3];try{0==t.a?o("function"==typeof n?n.call(void 0,t.b):t.b):1==t.a&&("function"==typeof r?o(r.call(void 0,t.b)):e(t.b))}catch(t){e(t)}}})}function u(e){return new n(function(t,n){var r=0,i=[];0==e.length&&t(i);for(var c=0;c<e.length;c+=1)o(e[c]).c(function(n){return function(o){i[n]=o,(r+=1)==e.length&&t(i)}}(c),n)})}function a(e){return new n(function(t,n){for(var r=0;r<e.length;r+=1)o(e[r]).c(t,n)})}var s,l=[];s=function(){setTimeout(t)};var d=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var r=this;return new n(function(n,o){r.f.push([e,t,n,o]),f(r)})},window.Promise||(window.Promise=n,window.Promise.resolve=o,window.Promise.reject=r,window.Promise.race=a,window.Promise.all=u,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype.catch=n.prototype.g)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.threesome=t()}(this,function(){"use strict";function e(e){j&&console.error("[Threesome warning]: "+e)}function t(e,t){return null!=t&&e instanceof t}function n(e,r,o,i,c){function u(e,o){if(null===e)return null;if(0===o)return e;var d,p;if("object"!=(void 0===e?"undefined":O(e)))return e;if(t(e,h))d=new h;else if(t(e,_))d=new _;else if(t(e,E))d=new E(function(t,n){e.then(function(e){t(u(e,o-1))},function(e){n(u(e,o-1))})});else if(n.__isArray(e))d=[];else if(n.__isRegExp(e))d=new RegExp(e.source,f(e)),e.lastIndex&&(d.lastIndex=e.lastIndex);else if(n.__isDate(e))d=new Date(e.getTime());else{if(l&&Buffer.isBuffer(e))return d=new Buffer(e.length),e.copy(d),d;t(e,Error)?d=Object.create(e):void 0===i?(p=Object.getPrototypeOf(e),d=Object.create(p)):(d=Object.create(i),p=i)}if(r){var y=a.indexOf(e);if(-1!=y)return s[y];a.push(e),s.push(d)}t(e,h)&&e.forEach(function(e,t){var n=u(t,o-1),r=u(e,o-1);d.set(n,r)}),t(e,_)&&e.forEach(function(e){var t=u(e,o-1);d.add(t)});for(var v in e){var w;p&&(w=Object.getOwnPropertyDescriptor(p,v)),w&&null==w.set||(d[v]=u(e[v],o-1))}if(Object.getOwnPropertySymbols)for(var b=Object.getOwnPropertySymbols(e),v=0;v<b.length;v++){var m=b[v],g=Object.getOwnPropertyDescriptor(e,m);(!g||g.enumerable||c)&&(d[m]=u(e[m],o-1),g.enumerable||Object.defineProperty(d,m,{enumerable:!1}))}if(c)for(var j=Object.getOwnPropertyNames(e),v=0;v<j.length;v++){var P=j[v],g=Object.getOwnPropertyDescriptor(e,P);g&&g.enumerable||(d[P]=u(e[P],o-1),Object.defineProperty(d,P,{enumerable:!1}))}return d}"object"===(void 0===r?"undefined":O(r))&&(o=r.depth,i=r.prototype,c=r.includeNonEnumerable,r=r.circular);var a=[],s=[],l="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===o&&(o=1/0),u(e,o)}function r(e){return Object.prototype.toString.call(e)}function o(e){return"object"===(void 0===e?"undefined":O(e))&&"[object Date]"===r(e)}function i(e){return"object"===(void 0===e?"undefined":O(e))&&"[object Array]"===r(e)}function c(e){return"object"===(void 0===e?"undefined":O(e))&&"[object RegExp]"===r(e)}function f(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}function u(e){var t=n(e);if("object"===(void 0===t?"undefined":O(t)))for(var r in t)t[r]=u(t[r]);else"string"==typeof t?t=encodeURI(t):"function"!=typeof t&&(t=t.toString());return t}function a(e){return decodeURIComponent(e)}function s(t,n){x.registerHandler(t,function(t){t=a(t);try{t=JSON.parse(t)}catch(t){e(t)}finally{n(t)}})}function l(t,n){return new Promise(function(r,o){if(!t||"string"!=typeof t)return o(t+" lost taskName");var i={taskId:t};n&&(i.param=u(n)),x.callHandler("NativeThreesome",i,function(t){t=a(t);try{t=JSON.parse(t)}catch(t){e(t)}finally{return r(t)}})})}function d(e){l("threesome/navigator/openGroup",e)}function p(e){l("threesome/navigator/openPage",e)}function y(){l("threesome/navigator/closeCurGroup")}function v(){l("threesome/navigator/closeCurPage")}function w(e){e()}var h,b="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),m=b&&window.navigator.userAgent.toLowerCase(),g=(m&&m.indexOf("android"),m&&/iphone|ipad|ipod|ios/.test(m),m&&m.indexOf("threesome")>0),j=(g&&m.match(/threesome\/([\d\.]*)/)[1],"undefined"!=typeof console),O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};try{h=Map}catch(e){h=function(){}}var _;try{_=Set}catch(e){_=function(){}}var E;try{E=Promise}catch(e){E=function(){}}n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},n.__objToStr=r,n.__isDate=o,n.__isArray=i,n.__isRegExp=c,n.__getRegExpFlags=f;var B=[],S=[],x=window.WebViewJavascriptBridge?window.WebViewJavascriptBridge:function(){var e={callHandler:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];B.push(function(){window.WebViewJavascriptBridge.callHandler.apply(window.WebViewJavascriptBridge,t)})},registerHandler:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];S.push(function(){window.WebViewJavascriptBridge.registerHandler.apply(window.WebViewJavascriptBridge,t)})}},t=function(e){for(;S.length>0;){var t=S.shift();t()}for(;B.length>0;){var t=B.shift();t()}};return window.WVJBCallbacks=[t],setTimeout(function(){var e=document.createElement("iframe");e.style.display="none",e.src="threesome://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)},0),e}(),T={};return function(){s("ThreesomeNativeNotification",function(e){var t=T[e.type],n="success"in t?t.success:function(){},r="fail"in t?t.fail:function(){},o="complete"in t?t.complete:function(){};switch(e.code){case 200:case 501:n(e.type);break;case 500:r(e.type)}o(e.type)})}(),P({},Object.freeze({navigateTo:d,redirectTo:p,navigateBack:y,redirectBack:v}),Object.freeze({ready:w}))});