!function(){"use strict";function e(e){l.push(e),1==l.length&&s()}function t(){for(;l.length;)l[0](),l.shift()}function n(e){this.a=d,this.b=void 0,this.f=[];var t=this;try{e(function(e){i(t,e)},function(e){c(t,e)})}catch(e){c(t,e)}}function o(e){return new n(function(t,n){n(e)})}function r(e){return new n(function(t){t(e)})}function i(e,t){if(e.a==d){if(t==e)throw new TypeError;var n=!1;try{var o=t&&t.then;if(null!=t&&"object"==typeof t&&"function"==typeof o)return void o.call(t,function(t){n||i(e,t),n=!0},function(t){n||c(e,t),n=!0})}catch(t){return void(n||c(e,t))}e.a=0,e.b=t,f(e)}}function c(e,t){if(e.a==d){if(t==e)throw new TypeError;e.a=1,e.b=t,f(e)}}function f(t){e(function(){if(t.a!=d)for(;t.f.length;){var e=t.f.shift(),n=e[0],o=e[1],r=e[2],e=e[3];try{0==t.a?r("function"==typeof n?n.call(void 0,t.b):t.b):1==t.a&&("function"==typeof o?r(o.call(void 0,t.b)):e(t.b))}catch(t){e(t)}}})}function u(e){return new n(function(t,n){var o=0,i=[];0==e.length&&t(i);for(var c=0;c<e.length;c+=1)r(e[c]).c(function(n){return function(r){i[n]=r,(o+=1)==e.length&&t(i)}}(c),n)})}function a(e){return new n(function(t,n){for(var o=0;o<e.length;o+=1)r(e[o]).c(t,n)})}var s,l=[];s=function(){setTimeout(t)};var d=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var o=this;return new n(function(n,r){o.f.push([e,t,n,r]),f(o)})},window.Promise||(window.Promise=n,window.Promise.resolve=r,window.Promise.reject=o,window.Promise.race=a,window.Promise.all=u,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype.catch=n.prototype.g)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.threesome=t()}(this,function(){"use strict";function e(e){g&&console.error("[Threesome warning]: "+e)}function t(e,t){return null!=t&&e instanceof t}function n(e,o,r,i,c){function u(e,r){if(null===e)return null;if(0===r)return e;var d,p;if("object"!=(void 0===e?"undefined":j(e)))return e;if(t(e,w))d=new w;else if(t(e,P))d=new P;else if(t(e,_))d=new _(function(t,n){e.then(function(e){t(u(e,r-1))},function(e){n(u(e,r-1))})});else if(n.__isArray(e))d=[];else if(n.__isRegExp(e))d=new RegExp(e.source,f(e)),e.lastIndex&&(d.lastIndex=e.lastIndex);else if(n.__isDate(e))d=new Date(e.getTime());else{if(l&&Buffer.isBuffer(e))return d=new Buffer(e.length),e.copy(d),d;t(e,Error)?d=Object.create(e):void 0===i?(p=Object.getPrototypeOf(e),d=Object.create(p)):(d=Object.create(i),p=i)}if(o){var y=a.indexOf(e);if(-1!=y)return s[y];a.push(e),s.push(d)}t(e,w)&&e.forEach(function(e,t){var n=u(t,r-1),o=u(e,r-1);d.set(n,o)}),t(e,P)&&e.forEach(function(e){var t=u(e,r-1);d.add(t)});for(var v in e){var h;p&&(h=Object.getOwnPropertyDescriptor(p,v)),h&&null==h.set||(d[v]=u(e[v],r-1))}if(Object.getOwnPropertySymbols)for(var b=Object.getOwnPropertySymbols(e),v=0;v<b.length;v++){var m=b[v],g=Object.getOwnPropertyDescriptor(e,m);(!g||g.enumerable||c)&&(d[m]=u(e[m],r-1),g.enumerable||Object.defineProperty(d,m,{enumerable:!1}))}if(c)for(var O=Object.getOwnPropertyNames(e),v=0;v<O.length;v++){var E=O[v],g=Object.getOwnPropertyDescriptor(e,E);g&&g.enumerable||(d[E]=u(e[E],r-1),Object.defineProperty(d,E,{enumerable:!1}))}return d}"object"===(void 0===o?"undefined":j(o))&&(r=o.depth,i=o.prototype,c=o.includeNonEnumerable,o=o.circular);var a=[],s=[],l="undefined"!=typeof Buffer;return void 0===o&&(o=!0),void 0===r&&(r=1/0),u(e,r)}function o(e){return Object.prototype.toString.call(e)}function r(e){return"object"===(void 0===e?"undefined":j(e))&&"[object Date]"===o(e)}function i(e){return"object"===(void 0===e?"undefined":j(e))&&"[object Array]"===o(e)}function c(e){return"object"===(void 0===e?"undefined":j(e))&&"[object RegExp]"===o(e)}function f(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}function u(e){var t=n(e);if("object"===(void 0===t?"undefined":j(t)))for(var o in t)t[o]=u(t[o]);else"string"==typeof t?t=encodeURI(t):"function"!=typeof t&&(t=t.toString());return t}function a(e){return decodeURIComponent(e)}function s(t,n){S.registerHandler(t,function(t){t=a(t);try{t=JSON.parse(t)}catch(t){e(t)}finally{n(t)}})}function l(t,n){return new Promise(function(o,r){if(!t||"string"!=typeof t)return r(t+" lost taskName");var i={taskId:t};n&&(i.param=u(n)),S.callHandler("NativeThreesome",i,function(t){t=a(t);try{t=JSON.parse(t)}catch(t){e(t)}finally{return o(t)}})})}function d(e){l("threesome/navigator/openGroup",e)}function p(e){l("threesome/navigator/openPage",e)}function y(){l("threesome/navigator/closeCurGroup")}function v(){l("threesome/navigator/closeCurPage")}var w,h="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),b=h&&window.navigator.userAgent.toLowerCase(),m=(b&&b.indexOf("android"),b&&/iphone|ipad|ipod|ios/.test(b),b&&b.indexOf("threesome")>0),g=(m&&b.match(/threesome\/([\d\.]*)/)[1],"undefined"!=typeof console),j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};try{w=Map}catch(e){w=function(){}}var P;try{P=Set}catch(e){P=function(){}}var _;try{_=Promise}catch(e){_=function(){}}n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},n.__objToStr=o,n.__isDate=r,n.__isArray=i,n.__isRegExp=c,n.__getRegExpFlags=f;var E=[],B=[],S=window.WebViewJavascriptBridge?window.WebViewJavascriptBridge:function(){var e={callHandler:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];E.push(function(){window.WebViewJavascriptBridge.callHandler.apply(window.WebViewJavascriptBridge,t)})},registerHandler:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];B.push(function(){window.WebViewJavascriptBridge.registerHandler.apply(window.WebViewJavascriptBridge,t)})}},t=function(e){for(;B.length>0;){var t=B.shift();t()}for(;E.length>0;){var t=E.shift();t()}};return window.WVJBCallbacks=[t],setTimeout(function(){var e=document.createElement("iframe");e.style.display="none",e.src="threesome://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)},0),e}(),x={};return function(){s("ThreesomeNativeNotification",function(e){var t=x[e.type],n="success"in t?t.success:function(){},o="fail"in t?t.fail:function(){},r="complete"in t?t.complete:function(){};switch(e.code){case 200:case 501:n(e.type);break;case 500:o(e.type)}r(e.type)})}(),O({},Object.freeze({navigateTo:d,redirectTo:p,navigateBack:y,redirectBack:v}))});