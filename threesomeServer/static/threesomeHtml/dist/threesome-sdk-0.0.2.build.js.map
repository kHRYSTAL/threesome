{"version":3,"file":"threesome-sdk-0.0.2.build.js","sources":["../src/threesome/core/util/env.js","../src/lib/clone.js","../src/threesome/core/util/params.js","../src/threesome/bridge/bridge.js","../src/threesome/core/interface/handler.js","../src/threesome/core/interface/notify.js","../src/threesome/core/api/navigate.js","../src/threesome/core/api/titlebar.js","../src/threesome/core/lifecycle/ready.js","../src/threesome/output.js"],"sourcesContent":["\nexport const inBrowser =\n    typeof window !== 'undefined' &&\n    Object.prototype.toString.call(window) !== '[object Object]'\n\nexport const UA = inBrowser && window.navigator.userAgent.toLowerCase()\nexport const isAndroid = UA && UA.indexOf('android') > 0\nexport const isIOS = UA && /iphone|ipad|ipod|ios/.test(UA)\nexport const isThreesome = UA && UA.indexOf('threesome') > 0\nexport const AppVersion = isThreesome && UA.match(/threesome\\/([\\d\\.]*)/)[1]\n\nexport function isNative (Ctor) {\n  return /native code/.test(Ctor.toString())\n}\n\n\nconst MAJOR_REG = /^(\\d+)\\.$/\nconst MINOR_REG = /\\.(\\d+)\\./\nconst PATCH_REG = /\\.(\\d+)$/\n\n\nfunction matchVersion (version, reg) {\n    return Number(version.match(reg)[1])\n}\n\n//与当前app版本比较是否更新\nexport function compareAppVersion (tagetVersion) {\n    if(!AppVersion){\n        return\n    }\n\n    let aArray = AppVersion.split('.')\n    let bArray = tagetVersion.split('.')\n\n    for (var i = 0; i < 3; i++) {\n        let aNum = Number(aArray[i])\n        let bNum = Number(bArray[i])\n\n        if(aNum === bNum){\n            continue\n        }else{\n            return aNum > bNum\n        }\n    }\n\n    return true\n}\n","\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      child = new Buffer(parent.length);\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nexport {clone}\n","import {clone} from '../../../lib/clone'\n\n\nexport function _formatParam(oldParam){\n    var param = clone(oldParam);\n\n    if(typeof param === 'object' ){\n        for(var key in param){\n            param[key] = _formatParam(param[key]);\n        }\n        // param = JSON.stringify(param);\n    }\n    else if(typeof param === 'string'){\n        param = encodeURI(param);\n    }\n    else if(typeof param !== 'function'){\n        param = param.toString();\n    }\n\n    return param;\n}\n\nexport function _decodeString(param){\n    // return decodeURI(param);\n    return decodeURIComponent(param)\n}\n\nexport function _createEventName(txt){\n    txt = encodeURI(txt).replace(/%/g,\"\");\n    return '_'+txt+'_Callback';\n}\n","var callQueue = [];\nvar registerQueue = [];\n\n\nfunction createBridge() {\n    var fakeBridge = {\n        callHandler: function(...args) {\n            callQueue.push(function(){\n                window.WebViewJavascriptBridge.callHandler.apply(window.WebViewJavascriptBridge, args)\n            })\n        },\n        registerHandler: function(...args) {\n            registerQueue.push(function(){\n                window.WebViewJavascriptBridge.registerHandler.apply(window.WebViewJavascriptBridge, args)\n            })\n        }\n    }\n\n    var callback = function(realBridge) {\n        bridge = realBridge\n\n        while (registerQueue.length > 0) {\n            var fn = registerQueue.shift()\n            fn()\n        }\n\n        while (callQueue.length > 0) {\n            var fn = callQueue.shift()\n            fn()\n        }\n    }\n\n    window.WVJBCallbacks = [callback]\n    setTimeout(function(){\n        var WVJBIframe = document.createElement('iframe')\n        WVJBIframe.style.display = 'none'\n        WVJBIframe.src = 'threesome://__BRIDGE_LOADED__'\n        document.documentElement.appendChild(WVJBIframe)\n        setTimeout(function() {\n            document.documentElement.removeChild(WVJBIframe)\n        }, 0)\n    }, 0)\n\n    return fakeBridge\n}\n\n\nvar bridge = window.WebViewJavascriptBridge ? window.WebViewJavascriptBridge : createBridge()\n\nexport {bridge}\n","import {warn, _formatParam, _decodeString} from '../util/output'\nimport {bridge} from '../../bridge/bridge'\n\n\nexport function _registerHandler(name, event){\n    bridge.registerHandler(name, function(res){\n\n        res = _decodeString(res)\n        try {\n            res = JSON.parse(res)\n        } catch (e) {} finally {\n            event(res)\n        }\n    })\n}\n\n\nexport function _callHandler(taskName, param){\n\n    return new Promise(function(resolve, reject){\n        if(!(taskName && typeof taskName === \"string\")){\n            reject(taskName + \" lost argument\");\n            return;\n        }\n\n        var config = {\n            taskId : taskName,\n        };\n\n        if(!!param){\n            config[\"param\"] =_formatParam(param);\n        }\n\n        bridge.callHandler('NativeThreesome', config, function(res){\n\n            res = _decodeString(res)\n            try {\n                res =  JSON.parse(res)\n            } catch (e) {}\n            finally {\n                resolve(res)\n            }\n        });\n    });\n}\n","import {_registerHandler, _callHandler} from './handler'\n\nvar obMap = {}\n\nexport function _registerNotify(key, event){\n    obMap[key] = event;\n}\n\nfunction _notifyCenter (){\n\n    _registerHandler('ThreesomeNativeNotification', function(res){\n        var callbacks = obMap[res.type];\n\n        var success = 'success' in callbacks? callbacks.success : function(){};\n        var fail = 'fail' in callbacks? callbacks.fail : function(){};\n        var complete = 'complete' in callbacks? callbacks.complete : function(){};\n\n\n        switch (res.code) {\n            case 200:\n            case 501:\n                success(res.type);\n                break;\n            case 500:\n                fail(res.type);\n                break;\n        }\n        complete(res.type);\n    });\n\n}\n\n_notifyCenter();\n","import {_registerHandler, _callHandler} from '../interface/output'\n\n/**\n * open a new page\n * @param config\n */\nexport function navigateTo(config) {\n    _callHandler('threesome/navigator/openGroup', config)\n}\n\n/**\n * redirect to current page\n * @param config\n */\nexport function redirectTo (config){\n    _callHandler('threesome/navigator/openPage', config);\n}\n\n/**\n * close current page\n */\nexport function navigateBack (){\n    _callHandler('threesome/navigator/closeCurGroup');\n}\n\n/**\n * redirect back current page\n */\nexport function redirectBack (){\n    _callHandler('threesome/navigator/closeCurPage');\n}\n\n","/**\n * Created by kHRYSTAL on 17/12/29.\n */\nimport {_registerHandler, _callHandler} from '../interface/output'\nimport {_createEventName} from '../util/output'\n\n/**\n * @export\n * @param {String} navBtnType enum [‘navBack’， ‘navBackWhite’]  default navBack(black)\n * @returns\n */\nexport function setBackButtonStyleType(navBtnType) {\n    return _callHandler(\"threesome/titleBar/leftbutton\", {navBtnType: navBtnType})\n}\n\n/**\n * @export\n * @param {String} color  0x000000 or #000000\n * @returns\n */\nexport function setCloseTextFontColor(color) {\n    return _callHandler(\"threesome/titleBar/leftclosebutton/color\", {color: color})\n}\n\n\n/**\n * createMenuButton\n */\nfunction createRightButton (config, handlerFunc){\n    var buttonName = config.txt ? config.txt :\n                        config.navBtnType ? config.navBtnType : '';\n    config['handlerName'] = _createEventName(buttonName);\n    _registerHandler(config.handlerName, handlerFunc); // register callback\n\n    return _callHandler('threesome/titleBar/button', config); // return promise\n}\n\nexport function showTxtRightButton (params, handlerFunc){\n    var config = (typeof params == 'string') ? {txt: params} : params\n    return createRightButton (config, handlerFunc)\n}\n\nexport function showGraphicalButton(navBtnType, handlerFunc){\n    return createRightButton ({navBtnType: navBtnType}, handlerFunc)\n}\n\nexport function setNavigationBar (config){\n    var pArr = [];\n    if(config.backgroundColor){\n        pArr.push(setNavigationBarBackgroundColor(config.backgroundColor))\n    }\n    if(config.title){\n        pArr.push(setNavigationBarTitle(config.title))\n    }\n    if(config.fontSize){\n        pArr.push(setNavigationBarFontSize(config.fontSize))\n    }\n    if(config.color){\n        pArr.push(setNavigationBarFontColor(config.color))\n    }\n    if(config.backgroundImage){\n        pArr.push(setNavigationBarBackgroundImage(config.backgroundImage))\n    }\n    if(config.statusBarStyletype){\n        pArr.push(setStatusBarStyletype(config.statusBarStyletype))\n    }\n    return pArr.length > 0 ? Promise.all(pArr) : undefined;\n}\n\n\n/**\n * setNavigationBarTitle\n * @param {String}   text     \n * @param {Function} callback \n */\nexport function setNavigationBarTitle (title){\n    return _callHandler('threesome/titleBar/title/text', {content: title});\n}\n\n\n/**\n * setNavigationBarColor\n * @param {String}   color    ‘0xFFFFFF’ or '#FFFFFF'\n * @param {Function} callback \n */\nexport function setNavigationBarFontColor (color){\n    return _callHandler('threesome/titleBar/title/textColor', {color: color});\n}\n\n\n/**\n * setNavigationBarFontSize\n * @param {Number}   fontSize \n * @param {Function} callback \n */\nexport function setNavigationBarFontSize (size){\n    return _callHandler('threesome/titleBar/title/fontSize', {size: size});\n}\n\n\n/**\n * setNavigationBarBackgroundColor\n * @param {String}   backgroundColor‘0xFFFFFF’ or '#FFFFFF'\n * @param {Function} callback\n */\nexport function setNavigationBarBackgroundColor (color){\n    return _callHandler('threesome/titleBar/background/color', {color: color});\n}\n\n/**\n * setNavigationBarBackgroundImage\n * @param {String}   imageType \n * @param {Function} callback\n */\nexport function setNavigationBarBackgroundImage (imageType){\n    return _callHandler('threesome/titleBar/background/image', {imageType: imageType});\n}\n\n/**\n * setStatusBar\n * @param {String}   style  statusbar text color 0: black 1:white\n * @param {Function} callback\n */\nexport function setStatusBarStyletype (style){\n    return _callHandler('threesome/statusbar/style', {style: style});\n}","export function ready(handler){\n    handler()\n}\n","import * as api from './core/api/output'\nimport * as lifecycle from './core/lifecycle/output'\nexport default Object.assign({}, api, lifecycle);\n"],"names":["inBrowser","window","Object","prototype","toString","call","UA","navigator","userAgent","toLowerCase","isAndroid","indexOf","isIOS","test","isThreesome","AppVersion","match","_instanceof","obj","type","nativeMap","Map","_","nativeSet","Set","nativePromise","Promise","clone","parent","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","Infinity","_clone","child","proto","resolve","reject","then","value","err","__isArray","__isRegExp","RegExp","source","__getRegExpFlags","lastIndex","__isDate","Date","getTime","isBuffer","length","copy","Error","create","getPrototypeOf","index","push","forEach","key","keyChild","valueChild","set","entryChild","add","i","attrs","getOwnPropertyDescriptor","getOwnPropertySymbols","symbols","symbol","descriptor","enumerable","defineProperty","allPropertyNames","getOwnPropertyNames","propertyName","clonePrototype","c","__objToStr","o","re","flags","global","ignoreCase","multiline","_formatParam","oldParam","param","encodeURI","_decodeString","decodeURIComponent","_createEventName","txt","replace","callQueue","registerQueue","createBridge","fakeBridge","args","WebViewJavascriptBridge","callHandler","apply","registerHandler","callback","realBridge","fn","shift","WVJBCallbacks","WVJBIframe","document","createElement","style","display","src","documentElement","appendChild","removeChild","bridge","_registerHandler","name","event","res","JSON","parse","e","_callHandler","taskName","config","obMap","_notifyCenter","callbacks","success","fail","complete","code","navigateTo","redirectTo","navigateBack","redirectBack","setBackButtonStyleType","navBtnType","setCloseTextFontColor","color","createRightButton","handlerFunc","buttonName","handlerName","showTxtRightButton","params","showGraphicalButton","setNavigationBar","pArr","backgroundColor","setNavigationBarBackgroundColor","title","setNavigationBarTitle","fontSize","setNavigationBarFontSize","setNavigationBarFontColor","backgroundImage","setNavigationBarBackgroundImage","statusBarStyletype","setStatusBarStyletype","all","undefined","content","size","imageType","ready","handler","babelHelpers.extends","api","lifecycle"],"mappings":"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"}