!function(){"use strict";function e(e){l.push(e),1==l.length&&s()}function t(){for(;l.length;)l[0](),l.shift()}function n(e){this.a=d,this.b=void 0,this.f=[];var t=this;try{e(function(e){i(t,e)},function(e){c(t,e)})}catch(e){c(t,e)}}function r(e){return new n(function(t,n){n(e)})}function o(e){return new n(function(t){t(e)})}function i(e,t){if(e.a==d){if(t==e)throw new TypeError;var n=!1;try{var r=t&&t.then;if(null!=t&&"object"==typeof t&&"function"==typeof r)return void r.call(t,function(t){n||i(e,t),n=!0},function(t){n||c(e,t),n=!0})}catch(t){return void(n||c(e,t))}e.a=0,e.b=t,f(e)}}function c(e,t){if(e.a==d){if(t==e)throw new TypeError;e.a=1,e.b=t,f(e)}}function f(t){e(function(){if(t.a!=d)for(;t.f.length;){var e=t.f.shift(),n=e[0],r=e[1],o=e[2],e=e[3];try{0==t.a?o("function"==typeof n?n.call(void 0,t.b):t.b):1==t.a&&("function"==typeof r?o(r.call(void 0,t.b)):e(t.b))}catch(t){e(t)}}})}function u(e){return new n(function(t,n){var r=0,i=[];0==e.length&&t(i);for(var c=0;c<e.length;c+=1)o(e[c]).c(function(n){return function(o){i[n]=o,(r+=1)==e.length&&t(i)}}(c),n)})}function a(e){return new n(function(t,n){for(var r=0;r<e.length;r+=1)o(e[r]).c(t,n)})}var s,l=[];s=function(){setTimeout(t)};var d=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var r=this;return new n(function(n,o){r.f.push([e,t,n,o]),f(r)})},window.Promise||(window.Promise=n,window.Promise.resolve=o,window.Promise.reject=r,window.Promise.race=a,window.Promise.all=u,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype.catch=n.prototype.g)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.threesome=t()}(this,function(){"use strict";function e(e,t){return null!=t&&e instanceof t}function t(n,r,o,i,f){function u(n,o){if(null===n)return null;if(0===o)return n;var d,p;if("object"!=(void 0===n?"undefined":m(n)))return n;if(e(n,w))d=new w;else if(e(n,O))d=new O;else if(e(n,P))d=new P(function(e,t){n.then(function(t){e(u(t,o-1))},function(e){t(u(e,o-1))})});else if(t.__isArray(n))d=[];else if(t.__isRegExp(n))d=new RegExp(n.source,c(n)),n.lastIndex&&(d.lastIndex=n.lastIndex);else if(t.__isDate(n))d=new Date(n.getTime());else{if(l&&Buffer.isBuffer(n))return d=new Buffer(n.length),n.copy(d),d;e(n,Error)?d=Object.create(n):void 0===i?(p=Object.getPrototypeOf(n),d=Object.create(p)):(d=Object.create(i),p=i)}if(r){var y=a.indexOf(n);if(-1!=y)return s[y];a.push(n),s.push(d)}e(n,w)&&n.forEach(function(e,t){var n=u(t,o-1),r=u(e,o-1);d.set(n,r)}),e(n,O)&&n.forEach(function(e){var t=u(e,o-1);d.add(t)});for(var v in n){var h;p&&(h=Object.getOwnPropertyDescriptor(p,v)),h&&null==h.set||(d[v]=u(n[v],o-1))}if(Object.getOwnPropertySymbols)for(var b=Object.getOwnPropertySymbols(n),v=0;v<b.length;v++){var g=b[v],j=Object.getOwnPropertyDescriptor(n,g);(!j||j.enumerable||f)&&(d[g]=u(n[g],o-1),j.enumerable||Object.defineProperty(d,g,{enumerable:!1}))}if(f)for(var _=Object.getOwnPropertyNames(n),v=0;v<_.length;v++){var E=_[v],j=Object.getOwnPropertyDescriptor(n,E);j&&j.enumerable||(d[E]=u(n[E],o-1),Object.defineProperty(d,E,{enumerable:!1}))}return d}"object"===(void 0===r?"undefined":m(r))&&(o=r.depth,i=r.prototype,f=r.includeNonEnumerable,r=r.circular);var a=[],s=[],l="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===o&&(o=1/0),u(n,o)}function n(e){return Object.prototype.toString.call(e)}function r(e){return"object"===(void 0===e?"undefined":m(e))&&"[object Date]"===n(e)}function o(e){return"object"===(void 0===e?"undefined":m(e))&&"[object Array]"===n(e)}function i(e){return"object"===(void 0===e?"undefined":m(e))&&"[object RegExp]"===n(e)}function c(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}function f(e){var n=t(e);if("object"===(void 0===n?"undefined":m(n)))for(var r in n)n[r]=f(n[r]);else"string"==typeof n?n=encodeURI(n):"function"!=typeof n&&(n=n.toString());return n}function u(e){return decodeURIComponent(e)}function a(e,t){B.registerHandler(e,function(e){e=u(e);try{e=JSON.parse(e)}catch(e){}finally{t(e)}})}function s(e,t){return new Promise(function(n,r){if(!e||"string"!=typeof e)return void r(e+" lost argument");var o={taskId:e};t&&(o.param=f(t)),B.callHandler("NativeThreesome",o,function(e){e=u(e);try{e=JSON.parse(e)}catch(e){}finally{n(e)}})})}function l(e){s("threesome/navigator/openGroup",e)}function d(e){s("threesome/navigator/openPage",e)}function p(){s("threesome/navigator/closeCurGroup")}function y(){s("threesome/navigator/closeCurPage")}function v(e){e()}var w,h="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),b=h&&window.navigator.userAgent.toLowerCase(),g=(b&&b.indexOf("android"),b&&/iphone|ipad|ipod|ios/.test(b),b&&b.indexOf("threesome")>0),m=(g&&b.match(/threesome\/([\d\.]*)/)[1],"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};try{w=Map}catch(e){w=function(){}}var O;try{O=Set}catch(e){O=function(){}}var P;try{P=Promise}catch(e){P=function(){}}t.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},t.__objToStr=n,t.__isDate=r,t.__isArray=o,t.__isRegExp=i,t.__getRegExpFlags=c;var _=[],E=[],B=window.WebViewJavascriptBridge?window.WebViewJavascriptBridge:function(){var e={callHandler:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];_.push(function(){window.WebViewJavascriptBridge.callHandler.apply(window.WebViewJavascriptBridge,t)})},registerHandler:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];E.push(function(){window.WebViewJavascriptBridge.registerHandler.apply(window.WebViewJavascriptBridge,t)})}},t=function(e){for(B=e;E.length>0;){var t=E.shift();t()}for(;_.length>0;){var t=_.shift();t()}};return window.WVJBCallbacks=[t],setTimeout(function(){var e=document.createElement("iframe");e.style.display="none",e.src="threesome://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)},0),e}(),S={};return function(){a("ThreesomeNativeNotification",function(e){var t=S[e.type],n="success"in t?t.success:function(){},r="fail"in t?t.fail:function(){},o="complete"in t?t.complete:function(){};switch(e.code){case 200:case 501:n(e.type);break;case 500:r(e.type)}o(e.type)})}(),j({},Object.freeze({navigateTo:l,redirectTo:d,navigateBack:p,redirectBack:y}),Object.freeze({ready:v}))});